"use strict";(self.webpackChunkfreshtomatoes_=self.webpackChunkfreshtomatoes_||[]).push([[199],{199:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var t=a(43),i=a(213),r=a(579);const c="f71a63058781b41be67992f9e77f6da4",n="https://api.themoviedb.org/3",l=()=>{const[e,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(1),[o,d]=(0,t.useState)(1),[h,v]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;v(!0),m(null);try{const a=await i.A.get("".concat(n,"/movie/top_rated"),{params:{api_key:c,language:"en-US",page:e}}),t=await Promise.all(a.data.results.map((async e=>{try{const s=await i.A.get("".concat(n,"/movie/").concat(e.id,"/reviews"),{params:{api_key:c,language:"en-US"}});return{...e,reviews:s.data.results}}catch(p){return console.error("Error fetching reviews for movie ID ".concat(e.id,":"),p),{...e,reviews:[]}}})));s(t),d(a.data.total_pages)}catch(p){console.error("Error fetching top-rated movies:",p),m("Failed to fetch reviews. Please try again later.")}finally{v(!1)}}(a)}),[a]);const u=e=>{l(e)};return(0,r.jsxs)("div",{className:"reviews-container",children:[(0,r.jsx)("h2",{children:"Movie Reviews"}),h?(0,r.jsx)("p",{children:"Loading..."}):p?(0,r.jsx)("p",{children:p}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"reviews-grid",children:e.map((e=>(0,r.jsxs)("div",{className:"review-card",children:[(0,r.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w200").concat(e.poster_path),alt:"".concat(e.title," Poster"),className:"movie-poster"}),(0,r.jsx)("h3",{children:e.title}),(0,r.jsx)("p",{className:"movie-overview",children:e.overview}),e.reviews.length>0?(0,r.jsx)("div",{className:"review-content",children:e.reviews.slice(0,2).map((e=>(0,r.jsx)("div",{className:"review",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:e.author}),": ",e.content.slice(0,100),"..."]})},e.id)))}):(0,r.jsx)("p",{children:"No reviews available."})]},e.id)))}),(0,r.jsxs)("div",{className:"pagination",children:[(0,r.jsx)("button",{onClick:()=>u(a-1),disabled:1===a,children:"Previous"}),(0,r.jsxs)("span",{children:["Page ",a," of ",o]}),(0,r.jsx)("button",{onClick:()=>u(a+1),disabled:a===o,children:"Next"})]})]})]})}}}]);
//# sourceMappingURL=199.84ddb733.chunk.js.map